# PX-010.8 — Controller Focus Map
**Targets:** RM-010 — UI & Control Architecture  
**Branch:** `feature/RM-010-focus-map`  
**Status:** Planned

## 1. Scope
Deliver a robust controller navigation layer that spans banner, tabs/sheets, panels, and feed interactions while preserving accessibility contrast and readability.

## 2. Objectives
1. Implement `/ui/core/FocusMap.gd` to describe directional focus graph and semantic actions (confirm, cancel, feed, shortcuts).
2. Annotate UI components (`TopBanner`, `BottomTabs`, `Sheet`, Store/Research lists) with focus metadata and integrate with Godot’s focus events.
3. Provide action bindings: `LB/RB` cycle tabs, `Y` opens Store, `X` opens Research, `RT` activates feed hold, `B` closes sheet/dialog.
4. Highlight focus state using tokenised styles ensuring WCAG AA contrast levels.

## 3. Deliverables
- Focus map script with APIs: `register_group`, `set_focus_path`, `next(tab_id)`, etc.
- Updated UI scenes linking focus order and calling `FocusMap` during `_ready`.
- Controller hint overlays (lightweight) for key actions appended to UI components.
- Documentation: controller focus rules appended to `docs/ux/UI_Principles.md`.

## 4. Acceptance Criteria
1. Entire HUD navigable via controller only; no dead ends.
2. `RT` keeps feed active and does not interfere with sheet navigation.
3. Focus highlight meets contrast spec and is visible across themes.
4. UILint (or manual log) confirms focus graph loaded without missing nodes.

## 5. Tests & Validation
- Manual gamepad run covering Home → Store → Research → Automation → Prestige → Settings.
- Automated smoke: create controller-focused headless test to ensure `FocusMap.validate()` returns true.

## 6. Dependencies
- Hinges on tokens/components from PX-010.3/4/6.
- Shares tooltip/dialog atoms with PX-010.11.

## 7. Rollback Plan
- Restore previous focus handling; disable `FocusMap` initialisation to return to default Godot focus behaviour.

## 8. Footers
```
RM: RM-010
PX: PX-010.8
```
