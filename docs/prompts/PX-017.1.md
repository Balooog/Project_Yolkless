# PX-017.1 — Telemetry & QA Pipeline
**Targets:** RM-014  
**Date:** 2025-10-22  
**Outcome:** Planned

## Driver Prompt
# Project Yolkless – PX-017.1  
### Telemetry & QA Pipeline (Targets RM-014)

---

## 1. Scope
Create a telemetry and QA automation pipeline capable of running hour-long headless simulations, collecting structured metrics, and exporting data for analysis.

## 2. Functional Objectives
1. **Logging Infrastructure**
   - Structured logs for PPS, queue length, credit delta, upgrade timing.
   - Configurable verbosity and filters.
2. **Headless Simulation**
   - CLI entry point to run time-accelerated economy simulations.
   - Parameter overrides for balance sheets and seeds.
3. **Data Export**
   - Generate CSV/JSON summaries per run.
   - Bundle raw logs for postmortem analysis.
4. **QA Tooling**
   - Scripts to compare runs against baselines.
   - Telemetry dashboards or notebooks for quick review.
5. **Integration**
   - Hook outputs into ShopDebug and automation diagnostics.

## 3. Architecture Notes
- Extend `tools/headless_tick.sh` to drive the new simulation entry point.
- Implement `res://src/ci/econ_probe.gd` enhancements for metrics (migrating from `game/scripts/ci/`).
- Use Godot’s `FileAccess` or JSON APIs for export.
- Provide schema documentation for telemetry fields.
- Embed assertions/alerts for regressions (e.g., negative PPS).

## 4. Acceptance Criteria
1. Headless run command executes within CI constraints and outputs telemetry files.
2. Metrics captured cover economy, automation, events, and power.
3. QA can diff telemetry outputs between builds.
4. Documentation explains workflow for designers and QA.
5. Failing regressions emit clear alerts/log entries.

## 5. Deliverables
- Updated CLI tooling under `/tools/`.
- Enhanced probe scripts under `src/ci/`.
- Telemetry schema docs in `/docs/roadmap/RM-014.md`.
- Sample datasets in `/logs/telemetry_samples/`.
- QA playbook for interpreting outputs.

## 6. Future Extensions
- Live dashboard integration (Grafana/Sheets).
- Automated Slack/webhook alerts on regression.
- Scenario scripting for specific economy states.

**Linked Roadmap:** RM-014 – Telemetry & QA Pipeline  
**Branch Convention:** `feature/RM-014-telemetry`  
**Parent Epic:** Quality & Tooling
