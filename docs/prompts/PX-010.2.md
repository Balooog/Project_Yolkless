# PX-010.2 — EnvDirector + Backyard Visual Integration
**Targets:** RM-010  
**Date:** 2024-05-18  
**Outcome:** Landed  

## Driver Prompt
Title: PR-010 — EnvironmentDirector, Pollution Overlay, and Backyard stage

Context:
- The roadmap calls for a reactive environment layer (pollution, stress, reputation) that feeds both UI and background visuals.
- Current build lacks a unifying director and the Backyard scene is static.

Goals:
1. Create `EnvironmentDirector.gd` that samples economy state every 0.2s, smoothing values and emitting `state_changed(pollution, stress, reputation)`.
2. Build a reusable `PollutionOverlay` control showing three labeled progress bars (pollution, stress, reputation) with localized strings/tooltips and contrast-friendly styling.
3. Author a procedural `EnvironmentStage_Backyard` scene: sky + ground tints lerp with pollution, ground haze thickens, coop colors shift, chickens idle-animate faster/slower with stress, and a reputation emoji flips at key thresholds.
4. Wire the main scene so EnvironmentDirector is instantiated, the overlay attaches near the HUD header, and the director drives both overlay and Backyard stage.
5. Update docs/roadmap to capture the feature and note next tiers.

Non-Goals:
- Implementing Tier 2+ environments.
- Persisting pollution metrics in the save system (follow-up item).

## Deliverables
- `game/scripts/EnvironmentDirector.gd`
- `game/scenes/modules/environment/PollutionOverlay.gd`
- `game/scenes/modules/environment/EnvironmentStage_Backyard.tscn`
- `game/scenes/modules/environment/EnvironmentStage_Backyard.gd`
- `game/scenes/Main.tscn`
- `docs/ROADMAP.md`, `README.md`

## Validation
- `./tools/ci_smoke.sh`
- Manual check: launch dev build, toggle feed, observe overlay values and Backyard tint/animation changes.
