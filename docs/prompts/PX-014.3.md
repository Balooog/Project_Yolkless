# PX-014.3 — Sandbox Timelapse & Nightly Dashboard Hook
**Targets:** RM-014 — Telemetry & QA Pipeline**
**Status:** Planned**
**Branch:** `feature/PX-014.3-timelapse`

## Goals
- Capture periodic sandbox frames (Diorama + Map view) during nightly replays for timelapse GIFs and visual regression.
- Integrate timelapse artifacts into the nightly dashboard and archive.
- Provide CLI switches to enable/disable capture without impacting core replay flow.

## Deliverables
- `tools/capture_sandbox_frame.gd` (or extend existing utilities) for deterministic frame export.
- Nightly replay integration (`ENV_RENDERER` loop or dual run) that captures frames every N seconds when `TIMELAPSE=1`.
- `tools/gen_timelapse.py` to stitch captured frames into GIF/MP4 and drop under `reports/nightly/<date>/`.
- Dashboard update (`tools/gen_dashboard.py`) embedding latest timelapse preview.
- Documentation (`Telemetry_Replay.md`, module brief) covering capture cadence and storage limits.

## Acceptance Criteria
1. Running `TIMELAPSE=1 ./tools/nightly_replay.sh` produces frame sequence + GIF without exceeding 10 % replay runtime.
2. GIF attached to nightly dashboard artifact; previous captures archived (30-day retention).
3. Capture supports both `sandbox_view=diorama` and `sandbox_view=map` (switch or dual-run documented).
4. Configurable capture interval (default 10 s); environment variables documented.
5. Storage guard: auto-prunes old timelapse frames beyond retention window.

## Notes
- Coordinates with PX-021.5 map toggle; leverage shared CA buffer and renderer API.
- Ensure capture respects fallback cadence to avoid perf spikes.

## References
- [PX-014.2](PX-014.2.md)
- [PX-021.4](PX-021.4.md), [PX-021.5](PX-021.5.md)
- [Telemetry_Replay.md](../quality/Telemetry_Replay.md)
