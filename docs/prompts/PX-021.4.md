# PX-021.4 — Diorama Era Evolution & Camera Pass
**Targets:** RM-021  
**Status:** Planned  
**Branch:** `feature/PX-021.4-diorama-era`

## Goals
- Evolve the existing sandbox viewport into a reactive diorama that reflects the player’s progress through distinct eras without resetting the simulation.
- Introduce responsive lighting, tinting, and subtle particle cues driven by Comfort Index (CI) and environment factors.
- Maintain performance budgets (≤2 ms logic, ≤1 ms render) with existing smoothing/fallback behaviour.

## Deliverables
- Era progression assets (background layers, props, LUTs) for: Backyard, Small Farm, Industrial, Eco-Revival, Off-World.
- Era selection logic based on research/upgrade milestones without mutating sim state.
- Camera tuning (zoom/parallax) per era with smooth transitions.
- Lighting/tint modulation hooked to CI/environment values (≤2 Hz updates).
- Updated EnvPanel tooltip showing Comfort bonus and active era label.
- Docs updated (module brief, roadmap, PX notes).

## Acceptance Criteria
1. Era transitions blend (crossfade/lerp) while keeping the CA grid state intact.
2. CI shifts modulate tint/particles smoothly; no abrupt colour pops.
3. Era-specific props toggle on/off with research milestones; no gameplay impact.
4. StatsProbe `sandbox_render_ms_p95` remains ≤1 ms; fallback path triggers when p95 >18 ms for 5 s.
5. EnvPanel tooltip shows “Comfort +X.XX % — Era: <label>”.

## Non-Goals
- Map view toggle (see PX-021.5).
- New simulation rules or upgrade balance changes.
- GPU rendering path (future PX).

## Placeholder Asset Checklist
- `EnvironmentStage_Backyard.tscn` — backyard coop (rectangles + coop triangle roof).
- `EnvironmentStage_SmallFarm.tscn` — silo + barn box props (golden palette).
- `EnvironmentStage_Industrial.tscn` — smokestacks and factory blocks (grey palette).
- `EnvironmentStage_EcoRevival.tscn` — greenhouses and vertical garden props (teal palette).
- `EnvironmentStage_OffWorld.tscn` — light towers and habitat pillars (violet palette).
Each scene uses basic shapes as stand-ins; replace with final art assets in future passes.

## References
- [RM-021](../roadmap/RM-021.md)
- [docs/modules/sandbox.md](../modules/sandbox.md)
- [PX-021.5](PX-021.5.md), [PX-014.3](PX-014.3.md)
