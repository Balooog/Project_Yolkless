# RM-010 — UI & Control Architecture

- **PX Anchors:** [PX-010.1](../prompts/PX-010.1.md), [PX-010.2](../prompts/PX-010.2.md)
- **Status:** Prototype integrated (default HUD)
- **Owner:** UX / UI Team
- **Branch Prefix:** `feature/RM-010-ui-architecture`

## Overview
Establish a mobile-first interface with persistent HUD, tactile feed controls, and modular panels that translate cleanly to desktop. The layout partitions the screen into a top metrics banner, an interactive factory canvas, and a bottom tab bar.
Respect the comfort-idle pacing and sensory cues summarized in the [Idle Game Comparative Analysis](../analysis/IdleGameComparative.md) when arranging feedback loops and surface motion.

## Key Objectives
- Keep critical stats (credits, storage, PPS, RP) always visible.
- Anchor feed interaction bottom-center with multitap shortcuts.
- Implement tab-based navigation for Store, Research, Automation, Prestige.
- Ensure overlays are non-blocking and keyboard-accessible on desktop.

## Dependencies
- Metrics sources from [RM-011](RM-011.md) and [RM-012](RM-012.md).
- Automation controls from [RM-013](RM-013.md).
- Prestige UI hooks from [RM-015](RM-015.md).

## Acceptance Outline
Documented in PX-010.1 / PX-010.2. Highlights:
1. Responsive layout spec with component inventory.
2. Interaction flows for feed, shop, research, automation toggles.
3. Accessibility considerations (contrast, focus order, control sizing).
4. Desktop parity plan (dock layouts, shortcuts).

## Prototype Deliverables
- `game/scenes/Main.tscn` — main scene boots with the new HUD while keeping the legacy widgets hidden for fallback instrumentation.
- `scenes/prototype/ui_architecture.tscn` — high fidelity layout prototype with responsive banner, canvas, and sheet overlays.
- `ui/prototype/UIArchitecturePrototype.gd` — control script handling breakpoint shifts, tab routing (hotkeys 1-5), feed quick action (`F`), hold-to-feed press/hold/release signalling, and data binding hooks for metrics/sheets.
- `ui/widgets/EnvPanel.tscn` — environment summary + preset selector now mounted inside the prototype layout for desktop/tablet runs.
- Factory canvas panel now hosts a dedicated `ViewportContainer/SubViewport` pairing so environment and conveyor scenes render inside the prototype layout without the legacy overlay layer.
- `project.godot` input actions `ui_tab_*` and `ui_tab_feed` to back desktop parity and controller integration.
- `docs/ui/RM-010-wireframes.md` — annotated wireframe notes covering portrait, tablet, and desktop variants.
- `docs/qa/RM-010-ui-checklist.md` — regression checkpoints for HUD metrics, tab focus, overlay behaviour, and prototype load state.

## Interaction Model
- **Banner:** Metrics grouped into reusable containers; alert pill mirrors feed status and remains docked top-right.
- **Environment:** Env panel docks to the right of the canvas on desktop/tablet and collapses off-canvas on smaller breakpoints while preserving data bindings.
- **Canvas:** Dedicated panel leaves space for automation overlays while surfacing desktop/tablet hints in `CanvasInfo`.
- **Sheets:** Bottom overlay on mobile/tablet, right-docked inspector on desktop; each sheet reserves controls for future content modules.
- **Navigation:** Mobile bottom bar keeps Feed centered; desktop exposes the same tabs through a vertical dock and shared hotkeys.
- **Default Mode:** Prototype HUD loads automatically; legacy HUD stays hidden but remains in the scene tree for tooling support.

## Outstanding Follow-ups
- Replace sheet text placeholders with functional widgets once RM-011/012/013 subsystems expose dedicated UI scenes.
- Skin panels with final theme tokens and responsive typography.
- Expand automation panel once RM-013 action widgets and telemetry overlays are defined.
- Revisit desktop centering: current prototype keeps the four groups visible but still leaves inconsistent gutters on extreme widths (see `docs/notes/ui_layout_iteration_2025-10-24.md` for the latest context).
