# RM-018 — Power & Resource Layer

- **PX Anchor:** [PX-018.1](../prompts/PX-018.1.md) _(to be created)_
- **Status:** Active — baseline power service shipping
- **Owner:** Systems Engineering
- **Branch Prefix:** `feature/RM-018-power`

## Overview
Create an abstract power model balancing production and consumption across buildings. Provide visual cues (ambient lighting, overlays) and prepare for future multi-zone grids.
Keep scarcity feedback loops within the comfort-idle tolerances defined by the [Idle Game Comparative Analysis](../analysis/IdleGameComparative.md) so power deficits nudge rather than punish.

## Key Objectives
- Define power generation/consumption stats for each structure.
- Track total capacity and expose `powerState` for automation decisions.
- Feed visual tinting and alerts based on power ratio.
- Support future extension to multiple grid zones.
- Ensure power warnings use calm UX/audio cues that align with the comfort-idle framing.

## Recent Progress
- `PowerService.gd` manages power ratios, StatBus integration, and warnings; automation and environment services react to changes.
- Environment presets feed power modifiers; telemetry captures per-tick power metrics via `StatsProbe`.
- UI hooks (EnvPanel) display live power multipliers and tooltips for comfort context.

## Remaining Work
- Model generation/consumption per building as layout (RM-019) comes online and log deficits to dashboards.
- Add calm visual/audio cues for warning/critical states in collaboration with RM-020.
- Document configuration knobs in `docs/modules/power.md` (to be authored) and extend tests for multi-zone planning.

## Dependencies
- Automation control decisions from [RM-013](RM-013.md).
- Factory layout placement costs from [RM-019](RM-019.md).
- Event modifiers from [RM-016](RM-016.md).
- UI readouts from [RM-010](RM-010.md).

## Acceptance Outline
Outlined in PX-018.1:
1. Power ledger updates each tick with building operations.
2. UI/overlay communicates power surplus/deficit clearly.
3. Hooks exposed to automation, events, and telemetry.
4. Documentation covers configuration for new buildings.
