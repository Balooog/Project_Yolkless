# RM-014 — Telemetry & QA Pipeline

- **PX Anchor:** [PX-017.1](../prompts/PX-017.1.md) _(to be created)_
- **Status:** Active — baseline harness + CI artifacts online
- **Owner:** QA & Tooling
- **Branch Prefix:** `feature/RM-014-telemetry`

## Overview
Build a repeatable telemetry harness that captures production metrics, automates headless simulations, and exports data for analysis. Enables balance regression tests and QA reproducibility.
Instrumentation should surface the comfort-idle signals defined in the [Idle Game Comparative Analysis](../analysis/IdleGameComparative.md), especially Comfort Index trends that validate serenity-first pacing.

## Key Objectives
- Expand logging to cover PPS, queue length, credit delta, upgrade timing.
- Record Comfort Index (`ci`) and bonus modifiers emitted by RM-021/RM-010 services so serenity shifts are traceable.
- Implement headless one-hour simulation runner with parameter overrides.
- Export telemetry to CSV/JSON for external analysis.
- Integrate hooks with ShopDebug/Economy instrumentation (RM-011).

## Recent Progress
- Headless replay (`tools/replay_headless.gd`) drives deterministic captures; CI publishes KPI JSON + charts via `scripts/telemetry_replay_demo.py`.
- `StatsProbe.gd` aggregates sandbox/economy/environment metrics, feeding nightly dashboards and alerts.
- DocOps pipeline enforces required telemetry docs; metrics catalog updated alongside new StatBus keys.

## Remaining Work
- Layer in diffing dashboards (RM-014 acceptance item 5) and surface comfort deltas in reports.
- Extend replay coverage beyond the demo harness (power stress, long-form session) and capture CSV output for analysts.
- Document artifact consumption in `docs/qa/Metrics_Dashboard_Spec.md` and provide quickstart for comparing PR vs baseline runs.

## Dependencies
- Economy stats from [RM-011](RM-011.md) and upgrades from [RM-012](RM-012.md).
- Automation events from [RM-013](RM-013.md).
- UI surfaces to display telemetry snapshots from [RM-010](RM-010.md).

## Acceptance Outline
Outlined in PX-017.1:
1. CLI pipeline runs deterministic simulations.
2. Logs emit structured events and summary reports.
3. QA can replay sessions and compare against baselines.
4. Documentation describes usage and integration points.
5. Default dashboards and exports include Comfort Index traces and CI bonus deltas alongside economy metrics.
