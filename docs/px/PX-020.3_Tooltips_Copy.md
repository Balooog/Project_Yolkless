# PX-020.3 — HUD & Automation Tooltip / Copy Alignment

> Aligns HUD copy, tooltip definitions, and localization hooks so the calm tone survives future automation + telemetry work.  Builds on PX-020.1 visuals and PX-020.2 panel events.

## Summary
- Audit every HUD label, tooltip, and status phrase touched by PX-020.* and document the canonical strings, tone rules, and localization notes.
- Define tooltip clamp regions and fallback copy so overlays never escape the [UI Matrix](../ui_baselines/ui_matrix.md) safe area and respect `Tooltip Clamp` bounds in the [UI Baseline Layout Spec](../ui_baselines/README_UI_BASELINE_LAYOUT.md).
- Provide copy bundles for automation panel actions, backlog warnings, and rate summaries referencing `docs/design/UX_Principles.md` and `docs/design/Narrative_Hooks.md`.

## Goals
1. Single source of truth for Slot D/F copy plus Automation Panel strings before localization (PX-022.1) begins.
2. Tooltip governance: when to show, how long they persist, tone shifts when warnings trigger, and how comfort language stays positive.
3. Prepare pseudo-loc smoke instructions and file references for localization partners.

## Dependencies
- [PX-020.1 GUI Wiring](PX-020.1_GUI_Wiring.md) for HUD slot behavior and StatsProbe integration.
- [PX-020.2 Automation Panel Interaction](PX-020.2_Interaction_AutomationPanel.md) for open/close/target states requiring copy.
- [Modules — Economy](../modules/economy.md) and [Modules — Conveyor](../modules/conveyor.md) for threshold terminology.
- [Docs: theme / UX](../theme_map.md) + [UX Principles](../design/UX_Principles.md) for tonal guidance.

## Tasks & Deliverables
| Task | Description | Output |
| --- | --- | --- |
| Copy catalog | Table of HUD + panel strings with tone tags, tooltip triggers, localization IDs | This doc (appendix) + cross-link to `docs/design/Modules_Index.md` |
| Tooltip geometry | Diagram showing clamp rect + anchor behaviors | Mermaid or ASCII figure referencing UI baseline |
| Warning tone rules | Define when to switch to warning/critical tokens (ties to StatBus + signals) | Section referencing modules + theme tokens |
| Localization prep | Pseudo-loc smoke steps, glossary references, CSV/TSV pointers | Checklist referencing PX-022.1 plan |
| Validation matrix alignment | Map copy work to PX-020 command set (`docs_lint`, `ui_assert_baseline`, `check_only_ci.sh`, replay screenshots) | Linked in PX-020.0 overview + roadmap |

## Copy Catalog (HUD & Automation Panel)
| Surface | String (EN) | Tone Token | Tooltip Trigger | Localization ID |
| --- | --- | --- | --- | --- |
| HUD Slot D | `"Egg Flow {pps}/s"` | `hud_label_normal` | Always visible; no tooltip | `hud_slot_d_economy_rate` |
| HUD Slot F (normal) | `"Queue {count}"` | `hud_label_normal` | Only tooltip when jam active | `hud_slot_f_backlog_normal` |
| HUD Slot F (warning) | `"Queue {count} ⚠"` | `hud_label_warning` | Tooltip explains jam cause (`automation_target_autoburst`) | `hud_slot_f_backlog_warning` |
| Automation panel title | `"Automation"` | `text_muted` | None | `automation_panel_title` |
| Automation info label (enabled) | `"Automation enabled"` (+ optional `" — limited by power"`) | `text_muted` | Tooltip mirrors StatBus power state | `automation_state_enabled` / `_power_limited` |
| Automation info label (disabled) | `"Automation paused"` | `text_muted` | Tooltip references `settings_requested` copy | `automation_state_disabled` |
| Button `auto_1` | `"Auto-feed bursts"` | button token | Tooltip clarifies PPS impact (Slot D reference) | `automation_target_autoburst` |

- Defer to [theme tokens](../theme_map.md) for colors/fonts; only escalate to `hud_label_warning` when StatBus `conveyor_backlog_label` includes warning tone.
- Additional automation targets should extend this table with matching localization IDs before implementation lands.

## Tooltip Geometry & Behavior
```
+--------------------------------------------------------------+
| Tooltip Clamp (UI Matrix §2)                                 |
|  • Bounds: (32,24) → (1248,696)                              |
|  • Automation/HUD tooltips anchor to the right-edge slots.   |
+--------------------------------------------------------------+
```
- Slot D/F tooltips must never exceed `(928,24,288,208)` dock bounds.  Clamp using `Control.global_position` plus `Tooltip Clamp` rect from the UI matrix.
- Automation buttons use the same clamp rules; their tooltips should prefer bottom-left anchoring on desktop and follow focus on mobile/tablet layouts.
- All tooltips fade within 2 s to maintain the calm tone outlined in `docs/design/UX_Principles.md`.

## Warning Tone Rules
- Default tone: `hud_label_normal`.
- Switch to `hud_label_warning` when StatBus `conveyor_backlog` ≥ 40 for ≥2.5 s (jam).  Append `" ⚠"` to the copy but avoid aggressive language; reference `docs/design/Narrative_Hooks.md` for calm phrasing.
- Automation-related warnings (e.g., power deficit) inherit colors from Power tokens (`hud_label_warning` or `_critical`) but reuse the automation copy IDs (`automation_state_power_limited`).

## Localization & Validation
1. **Pseudo-localization:** run `tools/localize/pseudo_loc.sh` (or manual pass by toggling `PSEUDO_LOC=1` in the config).  Inspect HUD/Automation sheets in editor preview or via `./tools/check_only_ci.sh` screenshots.
2. **Replay artifact:** execute the PX-020 replay checklist and capture `[hud]` log + JSON to confirm pseudo-loc strings flow through telemetry (Slot D/F labels and automation target label).
3. **Checklist attachment:** every PX-020.3 PR must attach:
   - `python3 tools/docs_lint/check_structure.py`
   - `python3 tools/ui_assert_baseline.py`
   - `source .env && ./tools/check_only_ci.sh`
   - Replay log/JSON showing localized strings
4. **Glossary:** add any new terminology to `docs/Glossary.md` before pseudo-loc sign-off.

## Acceptance Criteria
- Copy catalog covers: Slot D/F labels, panel titles/buttons, backlog warnings, automation target descriptions, tooltip help text.
- Tooltip guidance references clamp rect coordinates and explains how tooltips behave inside/outside HUD safe areas.
- Tone guide references `hud_label_normal`, `hud_label_warning`, `hud_label_critical`, and indicates when automation copy can escalate severity.
- Localization prep lists pseudo-loc command(s) or manual steps and points to relevant TSV/JSON assets so PX-022.1 can start immediately.
